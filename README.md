# CHaCon - Commitable HAsh CONtracts.

[![Build Status](https://travis-ci.com/theJasonFan/chacon.svg?token=Xz9rMtpGH2yMytbU95xT&branch=master)](https://travis-ci.com/theJasonFan/chacon)

**You're not supposed to commit 'data' to version control.**

CHaCon is designed to:
- Generate **file path x checksum** (md5) pairs in YAML format that can be saved and committed to version control. We call these 'contracts'.
- Verify contracts.

## Install

Install ChaCon with `pip install chacon`

## Usage:

### To generate a contract

	$ chacon create -i <TSV_OF_FILES> -o <OUTPUT_YAML>

For example, running `chacon` on the summary generated by Snakemake in `examples/1-snakemake` (see `verify_succeed.sh`. Will generate a contract with contents:

	output/ab.txt: fc5e038d38a57032085441e7fe7010b0
	output/ba.txt: 5acd1fb6f07255681a2f6187123c0d39

### To verify a contract

	$ chacon verify -i <contract>

When verification fails, `chacon` will indicate which files in said contract did not hash to the checksum in the contract.

For example, `chacon verify -i bad_contract.yml` will output:

	output/ab.txt : True
	output/ba.txt : False

Which would indicate that the checksum for `output/ba.txt` has changed.

### Exit codes
When `chacon` fails to verify a contract, it will exit with a non-zero exit code. Chacon will exit with a 0 exit code otherwise.